
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>phillc - Phillip Campbell</title>
	<meta name="author" content="Phillip Campbell">

	
	<meta name="description" content="Sep 19th, 2008 tech Automatic Static Media Folder Added another shortcut&hellip;
I had a config variable in my settings_local file to specify where &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="" rel="alternate" title="phillc - Phillip Campbell" type="application/atom+xml">
	
	<link rel="canonical" href="http://phillc.com/posts/2/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4379922-3']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><a href="/" class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/a378a027352ae0dc9c0bd249d06b46c3?s=160" alt="Profile Picture" style="width: 160px;" />
	
</a>

<nav id="main-nav"><ul class="main">
    <li><a href="/">Home</a></li>
    <li><a href="/blog/archives">Archives</a></li>
    <li style="color: #666;">Side projects:</li>
    <li><a href="http://agentvsagent.com">Agent vs Agent</a></li>
    <li><a href="http://rosterbater.com">Rosterbater</a></li>
    <li><a href="http://www.cheapboardgamer.com">the Cheap Boardgamer</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		
			<a class="facebook" href="http://www.facebook.com/phillc" title="Facebook">Facebook</a>
		
		
		
			<a class="twitter" href="http://twitter.com/phillc" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/phillc" title="GitHub">GitHub</a>
		
		
		
		
			<a class="linkedin" href="http://www.linkedin.com/in/phillc1" title="LinkedIn">LinkedIn</a>
		
		
		
		
		
		
		
    	
    	
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-09-19T00:00:00-04:00" data-updated="true" itemprop="datePublished">Sep 19<sup>th</sup>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/tech/'>tech</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/09/19/automatic-static-media-folder/" itemprop="url">Automatic Static Media Folder</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Added another shortcut&hellip;
I had a config variable in my settings_local file to specify where the media folder was in order to have django static serve it.</p>

<p>This is much easier.</p>

<p>urls.py:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">if</span> <span class="n">DEBUG</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">os</span>
    <span class="n">media_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">PROJECT_ROOT</span><span class="p">,</span> <span class="s">&#39;media&#39;</span><span class="p">)</span>
    <span class="n">urlpatterns</span> <span class="o">+=</span> <span class="n">patterns</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="p">(</span><span class="s">r&#39;^media/(?P&lt;path&gt;.*)$&#39;</span><span class="p">,</span> <span class="s">&#39;django.views.static.serve&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;document_root&#39;</span><span class="p">:</span> <span class="n">media_root</span><span class="p">}),</span>
    <span class="p">)</span></code></pre></div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-07-08T00:00:00-04:00" data-updated="true" itemprop="datePublished">Jul 8<sup>th</sup>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/tech/'>tech</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/07/08/structure-inside-project/" itemprop="url">Structure Inside a Project</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>A common problem I have had is that too much work was required when I needed to deploy my django project, or if i needed to work on the project on another computer. Subversion has been my friend, but part of the problem is the necessary local settings in each of the projects.</p>

<p>In addition to the overall structure between all my projects, I have developed a few tricks to make handling things inside of a project much easier.</p>

<p>Previously, my template folder and my media folder were in different parent directories. This caused me to need to change several variables in the settings.py (or my <a href="http://kapsh.com/blog/2008/jul/05/making-django-version-control-friendly/">settings_local.py</a>) of django in each environment that it existed in. However I no longer have to do that.</p>

<p>Inside my settings.py I have this:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">PROJECT_ROOT</span><span class="p">,</span> <span class="s">&#39;apps&#39;</span><span class="p">))</span></code></pre></div>


<p>The first two lines figure out the directory that the settings.py lives in
The third line inserts my apps folder to the python path (this works great with my <a href="http://kapsh.com/blog/2008/jul/01/developed-directory-structure/">django directory structure</a>)</p>

<p>Now, the next step for me was to move my template and media directories around. My directory structure for a project is as follows:</p>

<p>-project<br/>
&ndash;media <br/>
&mdash;css  <br/>
&mdash;js   <br/>
&mdash;images<br/>
&ndash;templates<br/>
&mdash;application template directory 1<br/>
&mdash;application template directory 2<br/>
&mdash;base.html                       <br/>
&ndash;apps                             <br/>
&mdash;app1                            <br/>
&mdash;app2                            <br/>
&ndash;settings.py                      <br/>
&ndash;settings_local.py</p>

<p>So as you can see, my templates folder is in the same directory as my settings.py. My media folder is too. In order to avoid making this a variable too:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">PROJECT_ROOT</span><span class="p">,</span> <span class="s">&#39;media&#39;</span><span class="p">)</span>

<span class="n">TEMPLATE_DIRS</span> <span class="o">=</span> <span class="p">(</span>
     <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">PROJECT_ROOT</span><span class="p">,</span> <span class="s">&#39;templates&#39;</span><span class="p">),</span>
<span class="p">)</span></code></pre></div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-07-07T00:00:00-04:00" data-updated="true" itemprop="datePublished">Jul 7<sup>th</sup>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/tech/'>tech</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/07/07/developed-directory-structure/" itemprop="url">Developed Directory Structure</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Over the course of my web development life, I have changed my work flow and directory structure many times. Each time gets a little bit better, but I doubt I will ever finish modifying it, as I am always learning new techniques.</p>

<p>I am presently using <a href="http://www.djangoproject.com">Django</a> in all of my projects, both at work and as a hobby. Django&rsquo;s ability to easily reuse applications has mad me change my directory structure several time. Finally, I do believe I have settled.</p>

<p>First thing to know, is that both at work and in my pet projects, I am hosting multiple websites on the same apache instance. This is simply because the load behind the website does not justify buying a new slice (I use <a href="http://www.slicehost.com">slicehost</a> for my hosting needs).</p>

<p>I also make use of several available applications out there, <a href="http://code.google.com/p/django-comment-utils/">django comment utils</a>, <a href="http://code.google.com/p/django-tagging/">django tagging</a>, and <a href="http://code.google.com/p/django-registration/">django-registration</a> just to name a few (all/most are findable through <a href="http://djangoplugables.com/">django pluggables</a>)</p>

<p>So that being said, I need to have a directory structure capable of handling each one of my projects, all of my own shared applications, and all of the downloaded applications.</p>

<p>Here is what I have come up with.</p>

<ul>
<li><p>projects/<br/>
&ndash; project 1/<br/>
&mdash; apps/    <br/>
&mdash;- non reusable app 1/<br/>
&mdash;- non reusable app 2/<br/>
&ndash; project 2/           <br/>
&ndash; project 3/           <br/>
&mdash;apps                 <br/>
&mdash;- non reusable app 3/</p></li>
<li><p>common/<br/>
&ndash; self made reusable app 1/<br/>
&ndash; self made reusable app 2/</p></li>
<li><p>external/<br/>
&ndash; grabbed reusable app 1/<br/>
&ndash; grabbed reusable app 2/<br/>
&ndash; grabbed reusable app 3/</p></li>
</ul>


<p>Basically, the idea being that I store my projects in the projects folder, with applications made just for that project in the project&rsquo;s application folder.</p>

<p>I put applications that I build that will be used by more than one project into the common folder.</p>

<p>Applications that I have grabbed from other people (comment_utils, tagging, etc) into the external folder.</p>

<p>Then for each virtual host, I add to the python path the projects folder, then reference settings by projectname.settings (from observation, django adds the folder where the settings file is to the python path itsself), and the common folder and the external folder. I also add the projects, external, and common folders to the python path inside of conf file.</p>

<p>That works for apache, but then to get manage.py to work (it doesn&rsquo;t work because none of the python paths are set for it), I edit &ldquo;/etc/environment&rdquo; and add the line</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="s2">&quot;/home/username/projects:/home/username/common:/home/username/external&quot;</span></code></pre></div>


<p>Bingo, now manage.py works.</p>

<p>Now, any time I want to add a new project, I do not have a ton of hassle trying to get the project&rsquo;s manage.py to work, and all my virtual hosts in apache have the same structure!</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-07-05T00:00:00-04:00" data-updated="true" itemprop="datePublished">Jul 5<sup>th</sup>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/tech/'>tech</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/07/05/making-django-version-control-friendly/" itemprop="url">Making Django Projects Version Control Friendly</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Subversion has been my friend ever since I learned about it. However, it took me a while to figure out how to deal with configuration files. For Django, this specifically relates to the settings.py.</p>

<p>Django projects can end up on many different environments. Putting settings.py into source control directly will cause our settings to migrate across all working copies. This is not reasonable, as not every person will have the same environment (not all using mysql, not all using the same directory).</p>

<p>Removing settings.py from version control, and make a separate settings.py.template file that contains just the basic structure is a solution to that. However, it brings another problem: What if you want to change a used application or a middleware? You would then have to make that change on all working copies.</p>

<p>My solution has been to make a settings_local.py.dist</p>

<p>This file has variables in it like media path, database information, and caching options. You can copy these things straight out of the settings.py (and delete them from settings.py)</p>

<p>This file will go under version control.</p>

<p>Now, in your settings.py, add the line</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">settings_local</span> <span class="kn">import</span> <span class="o">*</span></code></pre></div>


<p>(I added the line to the very bottom of my settings.py)</p>

<p>So, now when a working copy of the project is grabbed, the person behind it can copy settings_local.py.dist to settings_local.py. Inside settings_local.py the environment&rsquo;s details are placed. This file will be ignored from version control.</p>

<p>With this setup, you can add an application or middle ware to settings.py for easy distributing through version control, and it will not affect a workspace&rsquo;s local variables.</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-06-25T00:00:00-04:00" data-updated="true" itemprop="datePublished">Jun 25<sup>th</sup>, 2008</time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/06/25/purpose-website/" itemprop="url">Purpose of This Website</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Over the course of my programming life, I have written some form of blog in perl, then php, then in a framework of php, then ruby on rails, and now Django.</p>

<p>The real purpose of this site is to get an understanding of every component that goes into a blog. This is without a doubt the best one I&rsquo;ve ever written, but the same could be said about each of the ones I built before at that time.</p>

<p>This website is built in Django, where I currently build most of my applications now.</p>

<p>In addition to the building of the blog, I decided that it is time for me to write some of my technical thoughts down.</p>

<p>Yes I like to share, discuss, and debate many technological things, however another purpose of this site is to store my docs so that I can grab them anywhere. Not real big things or private things, but things like, a step by step on server setup, so that I can copy paste my long apt-get install command, without trying to remember it from memory.</p>

<p>This serves that purpose well.</p>

<p>This blog is obviously not complete. I will finish it over time, but it does share the same code with another website, so any improvements will reflect on both.</p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
        <a href="/index.html" class="prev">Prev</a>
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2015

    Phillip Campbell


<p>Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></p>
</footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'phillc';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
